"use strict";(self.webpackChunkcomposite_component_library=self.webpackChunkcomposite_component_library||[]).push([[372],{80372:(e,n,t)=>{t.r(n),t.d(n,{default:()=>pe});var a=t(96540),i=t(17186),o=t(64467),s=t(81935),r=t(64132),l=t(80045),c=t(40752),d=t(13939),m=t(85541),u=t(14384),g=t(74848);const p=["rowKey","columns","dataSource","getDataSource","isLoading","selectedRows","setSelectedRows","pagination","setPagination","multiSelect","multiSelectOptions","singleSelect","singleSelectOptions"];function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const h=e=>{const{rowKey:n="randomId",columns:t,dataSource:i,getDataSource:o,isLoading:s,selectedRows:r,setSelectedRows:u,pagination:w,setPagination:h,multiSelect:b,multiSelectOptions:y,singleSelect:S,singleSelectOptions:D}=e,O=(0,l.A)(e,p),j=(0,a.useRef)(null),T=(0,a.useRef)(null),P=(0,a.useMemo)((()=>{if(w&&h)return(0,d.lS)(w,(async e=>{let{pageNum:n,pageSize:t}=e;await(null==h?void 0:h({pageNum:n,pageSize:t})),o({pageNum:n,pageSize:t})}))}),[w,h]),v=(0,a.useMemo)((()=>b?f({value:(null==r?void 0:r.map((e=>e[n])))||[],onChange:e=>{const t=i.filter((t=>e.includes(t[n])));null==u||u(t)},sotpClickEventPropagation:!0,ref:j},y||{}):{}),[b,r,y,i]),R=(0,a.useMemo)((()=>{var e;return S?f({value:(null==r||null===(e=r[0])||void 0===e?void 0:e[n])||"",onChange:e=>{const t=i.filter((t=>t[n]===e));null==u||u(t)},ref:T},D||{}):{}}),[S,r,D,i]);(0,a.useEffect)((()=>{var e,n;s&&(null==j||null===(e=j.current)||void 0===e||e.clear(),null==T||null===(n=T.current)||void 0===n||n.clear())}),[s]);const N=(0,a.useMemo)((()=>(null==r?void 0:r.map((e=>e[n])))||[]),[r]),A=(0,a.useMemo)((()=>"randomId"===n&&(null==i?void 0:i.length)>0?i.map((e=>f(f({},e),{},{randomId:(0,m.r9)(12)}))):i),[i]);return(0,g.jsx)(c.A,f({rowKey:n,resize:!0,autoHeight:!0,recalculateHeight:!0,isLoading:s,columns:t,dataSource:A,pagination:P,selectedRowKeys:N,onRowClick:e=>{const t=e[n],a=null==r?void 0:r.find((e=>e[n]===t));if(S){var i,o;if(r&&(null===(i=r[0])||void 0===i?void 0:i[n])===t)return;null===(o=T.current)||void 0===o||o.setSelectedRow(e)}else{var s,l;if(a&&1===(null==r?void 0:r.length))return null==u||u([]),void(null==j||null===(l=j.current)||void 0===l||l.clear());null==j||null===(s=j.current)||void 0===s||s.setSelectedRows([e])}null==u||u([e])},multiSelect:b,multiSelectOptions:v,singleSelect:S,singleSelectOptions:R},O))},b=[{fileName:"AliMainTable.tsx",code:u.WU}].concat(c.w),y="AliMainTableSample_container__GSdzb",S="AliMainTableSample_itemTitleRow__JKMlu",D="AliMainTableSample_content__0pLvQ";function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const T={pageNum:1,pageSize:10,total:0},P=()=>{const[e,n]=(0,a.useState)(!1),[t,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(T),u=e=>{d(j(j({},c),e))},p=async e=>{n(!0),e=e||c;const t=await(0,m.AJ)({pageNum:e.pageNum,pageSize:e.pageSize});n(!1),l([]),t?(u(j(j({},e),{},{total:t.total})),i(t.data)):(u(j(j({},e),{},{total:0})),i([]))};return(0,a.useEffect)((()=>{p()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:S,children:(0,g.jsx)(r.Ay,{type:"primary",ghost:!0,onClick:()=>{o&&0!==o.length?s.Ay.success("当前选择的数据序号为: ".concat(o[0].id)):s.Ay.warning("请先选择一条数据")},children:"编辑"})}),(0,g.jsx)("div",{className:D,children:(0,g.jsx)(h,{isLoading:e,columns:[{name:"序号",code:"id",width:80,lock:"left"},{name:"邮箱",code:"email",width:180},{name:"日期",code:"date",width:180},{name:"日期类型",code:"dateType",width:150,render:e=>"workingDay"===e?"工作日":"naturalDay"===e?"自然日":""},{name:"数值",code:"number",width:180,align:"right"},{name:"备注",code:"remark",width:300,ellipsis:!0},{name:"字段1",code:"email",width:150},{name:"字段2",code:"email",width:150},{name:"字段3",code:"email",width:150},{name:"字段4",code:"email",width:150},{name:"字段5",code:"email",width:150},{name:"字段6",code:"email",width:150}],dataSource:t,getDataSource:p,selectedRows:o,setSelectedRows:l,pagination:c,setPagination:u})})]})},v=[{fileName:"index.tsx",code:'import React, { useEffect, useState } from "react";\nimport { Button, message } from "antd";\nimport AliMainTable from "@/components/AliTable/AliMainTable";\nimport type { ArtColumn2 } from "@/components/AliTable";\nimport { requestMockData } from "utils/util";\nimport styles from "./index.module.scss";\n\nconst INIT_PAGINATION = {\n  pageNum: 1,\n  pageSize: 10,\n  total: 0,\n};\n\nconst Content = () => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [tableData, setTableData] = useState<Record<string, any>[]>([]);\n  const [selectedRows, setSelectedRows] = useState<Record<string, any>[]>([]);\n  const [pagination, setPagin] = useState<Record<string, any>>(INIT_PAGINATION);\n\n  const setPagination = (pagin: Record<string, any>) => {\n    setPagin({ ...pagination, ...pagin });\n  };\n\n  const getTableData = async (pain?: Record<string, any>) => {\n    setLoading(true);\n    pain = pain || pagination;\n    const res = await requestMockData({\n      pageNum: pain.pageNum,\n      pageSize: pain.pageSize,\n    });\n    setLoading(false);\n    setSelectedRows([]);\n    if (res) {\n      setPagination({\n        ...pain,\n        total: res.total,\n      });\n      setTableData(res.data);\n    } else {\n      setPagination({ ...pain, total: 0 });\n      setTableData([]);\n    }\n  };\n\n  const onEditClick = () => {\n    if (!selectedRows || selectedRows.length === 0) {\n      message.warning("请先选择一条数据");\n      return;\n    }\n    message.success(`当前选择的数据序号为: ${selectedRows[0].id}`);\n  };\n\n  const columns: ArtColumn2[] = [\n    {\n      name: "序号",\n      code: "id",\n      width: 80,\n      lock: "left",\n    },\n    {\n      name: "邮箱",\n      code: "email",\n      width: 180,\n    },\n    {\n      name: "日期",\n      code: "date",\n      width: 180,\n    },\n    {\n      name: "日期类型",\n      code: "dateType",\n      width: 150,\n      render: (value: string) => {\n        if (value === "workingDay") {\n          return "工作日";\n        } else if (value === "naturalDay") {\n          return "自然日";\n        }\n        return "";\n      },\n    },\n    {\n      name: "数值",\n      code: "number",\n      width: 180,\n      align: "right",\n    },\n    {\n      name: "备注",\n      code: "remark",\n      width: 300,\n      ellipsis: true,\n    },\n    {\n      name: "字段1",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段2",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段3",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段4",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段5",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段6",\n      code: "email",\n      width: 150,\n    },\n  ];\n\n  useEffect(() => {\n    getTableData();\n  }, []);\n\n  return (\n    <>\n      <div className={styles.itemTitleRow}>\n        <Button type=\'primary\' ghost onClick={onEditClick}>\n          编辑\n        </Button>\n      </div>\n      <div className={styles.content}>\n        <AliMainTable\n          isLoading={loading}\n          columns={columns}\n          dataSource={tableData}\n          getDataSource={getTableData}\n          selectedRows={selectedRows}\n          setSelectedRows={setSelectedRows}\n          pagination={pagination}\n          setPagination={setPagination}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Content;'}].concat(b),R=()=>(0,g.jsx)(i.A,{className:y,title:"基于ali-react-table封装的表格组件",codeParams:v,children:(0,g.jsx)(P,{})}),N="SingleSelectTableSample_container__1w0eh",A="SingleSelectTableSample_itemTitleRow__BSHxF",k="SingleSelectTableSample_content__eKzqV";function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const M={pageNum:1,pageSize:10,total:0},I=()=>{const[e,n]=(0,a.useState)(!1),[t,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(M),u=e=>{d(_(_({},c),e))},p=async e=>{n(!0),e=e||c;const t=await(0,m.AJ)({pageNum:e.pageNum,pageSize:e.pageSize});n(!1),l([]),t?(u(_(_({},e),{},{total:t.total})),i(t.data)):(u(_(_({},e),{},{total:0})),i([]))};return(0,a.useEffect)((()=>{p()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:A,children:(0,g.jsx)(r.Ay,{type:"primary",ghost:!0,onClick:()=>{o&&0!==o.length?s.Ay.success("当前选择的数据序号为: ".concat(o[0].id)):s.Ay.warning("请先选择一条数据")},children:"编辑"})}),(0,g.jsx)("div",{className:k,children:(0,g.jsx)(h,{rowKey:"id",autoHeight:!0,isLoading:e,columns:[{name:"序号",code:"id",width:80,lock:"left"},{name:"邮箱",code:"email",width:180},{name:"日期",code:"date",width:180},{name:"日期类型",code:"dateType",width:150,render:e=>"workingDay"===e?"工作日":"naturalDay"===e?"自然日":""},{name:"数值",code:"number",width:180,align:"right"},{name:"备注",code:"remark",width:300,ellipsis:!0},{name:"字段1",code:"email",width:150},{name:"字段2",code:"email",width:150},{name:"字段3",code:"email",width:150},{name:"字段4",code:"email",width:150},{name:"字段5",code:"email",width:150},{name:"字段6",code:"email",width:150}],dataSource:t,getDataSource:p,selectedRows:o,setSelectedRows:l,pagination:c,setPagination:u,singleSelect:!0,footerDataSource:[{email:"sdljlkfsdld"}],isStickyFooter:!1})})]})},C=[{fileName:"index.tsx",code:'import React, { useEffect, useState, useMemo } from "react";\nimport { Button, message } from "antd";\nimport AliMainTable from "@/components/AliTable/AliMainTable";\nimport { ArtColumn2 } from "@/components/AliTable";\nimport { requestMockData } from "utils/util";\nimport styles from "./index.module.scss";\n\nconst INIT_PAGINATION = {\n  pageNum: 1,\n  pageSize: 10,\n  total: 0,\n};\n\nconst Content = () => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [tableData, setTableData] = useState<Record<string, any>[]>([]);\n  const [selectedRows, setSelectedRows] = useState<Record<string, any>[]>([]);\n  const [pagination, setPagin] = useState<Record<string, any>>(INIT_PAGINATION);\n\n  const setPagination = (pagin: Record<string, any>) => {\n    setPagin({ ...pagination, ...pagin });\n  };\n\n  const getTableData = async (pain?: Record<string, any>) => {\n    setLoading(true);\n    pain = pain || pagination;\n    const res = await requestMockData({\n      pageNum: pain.pageNum,\n      pageSize: pain.pageSize,\n    });\n    setLoading(false);\n    setSelectedRows([]);\n    if (res) {\n      setPagination({\n        ...pain,\n        total: res.total,\n      });\n      setTableData(res.data);\n    } else {\n      setPagination({ ...pain, total: 0 });\n      setTableData([]);\n    }\n  };\n\n  const onEditClick = () => {\n    if (!selectedRows || selectedRows.length === 0) {\n      message.warning("请先选择一条数据");\n      return;\n    }\n    message.success(`当前选择的数据序号为: ${selectedRows[0].id}`);\n  };\n\n  const columns: ArtColumn2[] = [\n    {\n      name: "序号",\n      code: "id",\n      width: 80,\n      lock: "left",\n    },\n    {\n      name: "邮箱",\n      code: "email",\n      width: 180,\n    },\n    {\n      name: "日期",\n      code: "date",\n      width: 180,\n    },\n    {\n      name: "日期类型",\n      code: "dateType",\n      width: 150,\n      render: (value: string) => {\n        if (value === "workingDay") {\n          return "工作日";\n        } else if (value === "naturalDay") {\n          return "自然日";\n        }\n        return "";\n      },\n    },\n    {\n      name: "数值",\n      code: "number",\n      width: 180,\n      align: "right",\n    },\n    {\n      name: "备注",\n      code: "remark",\n      width: 300,\n      ellipsis: true,\n    },\n    {\n      name: "字段1",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段2",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段3",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段4",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段5",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段6",\n      code: "email",\n      width: 150,\n    },\n  ];\n\n  useEffect(() => {\n    getTableData();\n  }, []);\n\n  return (\n    <>\n      <div className={styles.itemTitleRow}>\n        <Button type=\'primary\' ghost onClick={onEditClick}>\n          编辑\n        </Button>\n      </div>\n      <div className={styles.content}>\n        <AliMainTable\n          rowKey=\'id\'\n          autoHeight\n          isLoading={loading}\n          columns={columns}\n          dataSource={tableData}\n          getDataSource={getTableData}\n          selectedRows={selectedRows}\n          setSelectedRows={setSelectedRows}\n          pagination={pagination}\n          setPagination={setPagination}\n          singleSelect\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Content;'}],z=()=>(0,g.jsx)(i.A,{className:N,title:"单选表格",codeParams:C,children:(0,g.jsx)(I,{})}),E="MultiSelectTableSample_container__4p9jY",L="MultiSelectTableSample_itemTitleRow__GyOGo",Y="MultiSelectTableSample_content__8zKhK";function K(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?K(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const G={pageNum:1,pageSize:10,total:0},H=()=>{const[e,n]=(0,a.useState)(!1),[t,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(G),u=e=>{d(F(F({},c),e))},p=async e=>{n(!0),e=e||c;const t=await(0,m.AJ)({pageNum:e.pageNum,pageSize:e.pageSize});n(!1),l([]),t?(u(F(F({},e),{},{total:t.total})),i(t.data)):(u(F(F({},e),{},{total:0})),i([]))};return(0,a.useEffect)((()=>{p()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:L,children:(0,g.jsx)(r.Ay,{type:"primary",ghost:!0,onClick:()=>{o&&0!==o.length?s.Ay.success("当前选择的数据序号为: ".concat(o.map((e=>e.id)).join(","))):s.Ay.warning("请先选择一条数据")},children:"编辑"})}),(0,g.jsx)("div",{className:Y,children:(0,g.jsx)(h,{rowKey:"id",isLoading:e,columns:[{name:"序号",code:"id",width:80,lock:"left"},{name:"邮箱",code:"email",width:180},{name:"日期",code:"date",width:180},{name:"日期类型",code:"dateType",width:150,render:e=>"workingDay"===e?"工作日":"naturalDay"===e?"自然日":""},{name:"数值",code:"number",width:180,align:"right"},{name:"备注",code:"remark",width:300,ellipsis:!0},{name:"字段1",code:"email",width:150},{name:"字段2",code:"email",width:150},{name:"字段3",code:"email",width:150},{name:"字段4",code:"email",width:150},{name:"字段5",code:"email",width:150},{name:"字段6",code:"email",width:150}],dataSource:t,getDataSource:p,selectedRows:o,setSelectedRows:l,pagination:c,setPagination:u,multiSelect:!0})})]})},B=[{fileName:"index.tsx",code:'import React, { useEffect, useState } from "react";\nimport { Button, message } from "antd";\nimport AliMainTable from "@/components/AliTable/AliMainTable";\nimport type { ArtColumn2 } from "@/components/AliTable";\nimport { requestMockData } from "utils/util";\nimport styles from "./index.module.scss";\n\nconst INIT_PAGINATION = {\n  pageNum: 1,\n  pageSize: 10,\n  total: 0,\n};\n\nconst Content = () => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [tableData, setTableData] = useState<Record<string, any>[]>([]);\n  const [selectedRows, setSelectedRows] = useState<Record<string, any>[]>([]);\n  const [pagination, setPagin] = useState<Record<string, any>>(INIT_PAGINATION);\n\n  const setPagination = (pagin: Record<string, any>) => {\n    setPagin({ ...pagination, ...pagin });\n  };\n\n  const getTableData = async (pain?: Record<string, any>) => {\n    setLoading(true);\n    pain = pain || pagination;\n    const res = await requestMockData({\n      pageNum: pain.pageNum,\n      pageSize: pain.pageSize,\n    });\n    setLoading(false);\n    setSelectedRows([]);\n    if (res) {\n      setPagination({\n        ...pain,\n        total: res.total,\n      });\n      setTableData(res.data);\n    } else {\n      setPagination({ ...pain, total: 0 });\n      setTableData([]);\n    }\n  };\n\n  const onEditClick = () => {\n    if (!selectedRows || selectedRows.length === 0) {\n      message.warning("请先选择一条数据");\n      return;\n    }\n    message.success(\n      `当前选择的数据序号为: ${selectedRows.map((item) => item.id).join(",")}`\n    );\n  };\n\n  const columns: ArtColumn2[] = [\n    {\n      name: "序号",\n      code: "id",\n      width: 80,\n      lock: "left",\n    },\n    {\n      name: "邮箱",\n      code: "email",\n      width: 180,\n    },\n    {\n      name: "日期",\n      code: "date",\n      width: 180,\n    },\n    {\n      name: "日期类型",\n      code: "dateType",\n      width: 150,\n      render: (value: string) => {\n        if (value === "workingDay") {\n          return "工作日";\n        } else if (value === "naturalDay") {\n          return "自然日";\n        }\n        return "";\n      },\n    },\n    {\n      name: "数值",\n      code: "number",\n      width: 180,\n      align: "right",\n    },\n    {\n      name: "备注",\n      code: "remark",\n      width: 300,\n      ellipsis: true,\n    },\n    {\n      name: "字段1",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段2",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段3",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段4",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段5",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段6",\n      code: "email",\n      width: 150,\n    },\n  ];\n\n  useEffect(() => {\n    getTableData();\n  }, []);\n\n  return (\n    <>\n      <div className={styles.itemTitleRow}>\n        <Button type=\'primary\' ghost onClick={onEditClick}>\n          编辑\n        </Button>\n      </div>\n      <div className={styles.content}>\n        <AliMainTable\n          rowKey=\'id\'\n          isLoading={loading}\n          columns={columns}\n          dataSource={tableData}\n          getDataSource={getTableData}\n          selectedRows={selectedRows}\n          setSelectedRows={setSelectedRows}\n          pagination={pagination}\n          setPagination={setPagination}\n          multiSelect\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Content;'}],q=()=>(0,g.jsx)(i.A,{className:E,title:"多选表格",codeParams:B,children:(0,g.jsx)(H,{})}),J="SortableTableSample_container__-5iz2",W="SortableTableSample_content__ibblM";var $=t(74353),Q=t.n($);function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const X={pageNum:1,pageSize:10,total:0},Z=()=>{const[e,n]=(0,a.useState)(!1),[t,i]=(0,a.useState)([]),[o,s]=(0,a.useState)(X),r=e=>{s(V(V({},o),e))},l=async e=>{n(!0),e=e||o;const t=await(0,m.AJ)({pageNum:e.pageNum,pageSize:e.pageSize});n(!1),t?(r(V(V({},e),{},{total:t.total})),i(t.data)):(r(V(V({},e),{},{total:0})),i([]))},c=[{name:"序号",code:"id",width:80,lock:"left"},{name:"邮箱",code:"email",width:180},{name:"日期",code:"date",width:180,features:{sortable:(e,n)=>{if(!e)return-1;if(!n)return 1;{const t=Q()(e,"YYYY-MM-DD HH:mm:ss"),a=Q()(n,"YYYY-MM-DD HH:mm:ss");if(t>a)return 1;if(t<a)return-1}return 0}}},{name:"日期类型",code:"dateType",width:150,features:{sortable:!0},render:e=>"workingDay"===e?"工作日":"naturalDay"===e?"自然日":""},{name:"数值",code:"number",width:180,align:"right",features:{sortable:!0}},{name:"备注",code:"remark",width:300,ellipsis:!0},{name:"字段1",code:"email",width:150},{name:"字段2",code:"email",width:150},{name:"字段3",code:"email",width:150},{name:"字段4",code:"email",width:150},{name:"字段5",code:"email",width:150},{name:"字段6",code:"email",width:150}];return(0,a.useEffect)((()=>{l()}),[]),(0,g.jsx)("div",{className:W,children:(0,g.jsx)(h,{isLoading:e,columns:c,dataSource:t,getDataSource:l,pagination:o,setPagination:r,sort:!0,sortOptions:{keepDataSource:!1}})})},ee=[{fileName:"index.tsx",code:'import React, { useEffect, useState } from "react";\nimport AliMainTable from "@/components/AliTable/AliMainTable";\nimport type { ArtColumn2 } from "@/components/AliTable";\nimport { requestMockData } from "utils/util";\nimport styles from "./index.module.scss";\nimport dayjs from "dayjs";\n\nconst INIT_PAGINATION = {\n  pageNum: 1,\n  pageSize: 10,\n  total: 0,\n};\n\nconst Content = () => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [tableData, setTableData] = useState<Record<string, any>[]>([]);\n  const [pagination, setPagin] = useState<Record<string, any>>(INIT_PAGINATION);\n\n  const setPagination = (pagin: Record<string, any>) => {\n    setPagin({ ...pagination, ...pagin });\n  };\n\n  const getTableData = async (pain?: Record<string, any>) => {\n    setLoading(true);\n    pain = pain || pagination;\n    const res = await requestMockData({\n      pageNum: pain.pageNum,\n      pageSize: pain.pageSize,\n    });\n    setLoading(false);\n    if (res) {\n      setPagination({\n        ...pain,\n        total: res.total,\n      });\n      setTableData(res.data);\n    } else {\n      setPagination({ ...pain, total: 0 });\n      setTableData([]);\n    }\n  };\n\n  const columns: ArtColumn2[] = [\n    {\n      name: "序号",\n      code: "id",\n      width: 80,\n      lock: "left",\n    },\n    {\n      name: "邮箱",\n      code: "email",\n      width: 180,\n    },\n    {\n      name: "日期",\n      code: "date",\n      width: 180,\n      features: {\n        // 自定义排序比较函数\n        sortable: (prev: any, next: any) => {\n          if (!prev) {\n            return -1; // 没有值的，降序时排最后，升序时排最前\n          } else if (!next) {\n            return 1; // 没有值的，降序时排最后，升序时排最前\n          } else {\n            const prevDate = dayjs(prev, "YYYY-MM-DD HH:mm:ss");\n            const nextDate = dayjs(next, "YYYY-MM-DD HH:mm:ss");\n            if (prevDate > nextDate) {\n              return 1;\n            } else if (prevDate < nextDate) {\n              return -1;\n            }\n          }\n          return 0;\n        },\n      },\n    },\n    {\n      name: "日期类型",\n      code: "dateType",\n      width: 150,\n      features: {\n        sortable: true,\n      },\n      render: (value: string) => {\n        if (value === "workingDay") {\n          return "工作日";\n        } else if (value === "naturalDay") {\n          return "自然日";\n        }\n        return "";\n      },\n    },\n    {\n      name: "数值",\n      code: "number",\n      width: 180,\n      align: "right",\n      features: {\n        sortable: true,\n      },\n    },\n    {\n      name: "备注",\n      code: "remark",\n      width: 300,\n      ellipsis: true,\n    },\n    {\n      name: "字段1",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段2",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段3",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段4",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段5",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段6",\n      code: "email",\n      width: 150,\n    },\n  ];\n\n  useEffect(() => {\n    getTableData();\n  }, []);\n\n  return (\n    <div className={styles.content}>\n      <AliMainTable\n        isLoading={loading}\n        columns={columns}\n        dataSource={tableData}\n        getDataSource={getTableData}\n        pagination={pagination}\n        setPagination={setPagination}\n        sort\n        sortOptions={{\n          keepDataSource: false,\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Content;\n'}],ne=()=>(0,g.jsx)(i.A,{className:J,title:"支持排序表格",codeParams:ee,children:(0,g.jsx)(Z,{})}),te="WithFooterTableSample_container__T7ODv",ae="WithFooterTableSample_itemTitleRow__boJrf",ie="WithFooterTableSample_content__9-KJw";function oe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function se(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?oe(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const re={pageNum:1,pageSize:10,total:0},le=()=>{const[e,n]=(0,a.useState)(!1),[t,i]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)([]),[u,p]=(0,a.useState)(re),w=e=>{p(se(se({},u),e))},f=async e=>{n(!0),e=e||u;const t=await(0,m.AJ)({pageNum:e.pageNum,pageSize:e.pageSize});if(n(!1),d([]),t){const n=t.data.reduce(((e,n)=>e+n.number),0);w(se(se({},e),{},{total:t.total})),i(t.data),l([{id:"footer",num:"汇总行",number:n}])}else w(se(se({},e),{},{total:0})),i([]),l([])};return(0,a.useEffect)((()=>{f()}),[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:ae,children:(0,g.jsx)(r.Ay,{type:"primary",ghost:!0,onClick:()=>{c&&0!==c.length?s.Ay.success("当前选择的数据序号为: ".concat(c[0].num)):s.Ay.warning("请先选择一条数据")},children:"编辑"})}),(0,g.jsx)("div",{className:ie,children:(0,g.jsx)(h,{rowKey:"id",isLoading:e,columns:[{name:"序号",code:"num",width:80,lock:"left"},{name:"邮箱",code:"email",width:180},{name:"日期",code:"date",width:180},{name:"日期类型",code:"dateType",width:150,render:e=>"workingDay"===e?"工作日":"naturalDay"===e?"自然日":""},{name:"数值",code:"number",width:180,align:"right"},{name:"备注",code:"remark",width:300,ellipsis:!0},{name:"字段1",code:"email",width:150},{name:"字段2",code:"email",width:150},{name:"字段3",code:"email",width:150},{name:"字段4",code:"email",width:150},{name:"字段5",code:"email",width:150},{name:"字段6",code:"email",width:150}],dataSource:t,getDataSource:f,selectedRows:c,setSelectedRows:d,pagination:u,setPagination:w,footerDataSource:o,isStickyFooter:!0})})]})},ce=[{fileName:"index.tsx",code:'import React, { useEffect, useState } from "react";\nimport { Button, message } from "antd";\nimport AliMainTable from "@/components/AliTable/AliMainTable";\nimport type { ArtColumn2 } from "@/components/AliTable";\nimport { requestMockData } from "utils/util";\nimport styles from "./index.module.scss";\n\nconst INIT_PAGINATION = {\n  pageNum: 1,\n  pageSize: 10,\n  total: 0,\n};\n\nconst Content = () => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [tableData, setTableData] = useState<Record<string, any>[]>([]);\n  const [footerDataSource, setFooterDataSource] = useState<\n    Record<string, any>[]\n  >([]);\n  const [selectedRows, setSelectedRows] = useState<Record<string, any>[]>([]);\n  const [pagination, setPagin] = useState<Record<string, any>>(INIT_PAGINATION);\n\n  const setPagination = (pagin: Record<string, any>) => {\n    setPagin({ ...pagination, ...pagin });\n  };\n\n  const getTableData = async (pain?: Record<string, any>) => {\n    setLoading(true);\n    pain = pain || pagination;\n    const res = await requestMockData({\n      pageNum: pain.pageNum,\n      pageSize: pain.pageSize,\n    });\n    setLoading(false);\n    setSelectedRows([]);\n    if (res) {\n      // 汇总数值\n      const sum = res.data.reduce(\n        (result: number, record: Record<string, any>) => result + record.number,\n        0\n      );\n      setPagination({\n        ...pain,\n        total: res.total,\n      });\n      setTableData(res.data);\n      setFooterDataSource([{ id: "footer", num: "汇总行", number: sum }]);\n      footerDataSource;\n    } else {\n      setPagination({ ...pain, total: 0 });\n      setTableData([]);\n      setFooterDataSource([]);\n    }\n  };\n\n  const onEditClick = () => {\n    if (!selectedRows || selectedRows.length === 0) {\n      message.warning("请先选择一条数据");\n      return;\n    }\n    message.success(`当前选择的数据序号为: ${selectedRows[0].num}`);\n  };\n\n  const columns: ArtColumn2[] = [\n    {\n      name: "序号",\n      code: "num",\n      width: 80,\n      lock: "left",\n    },\n    {\n      name: "邮箱",\n      code: "email",\n      width: 180,\n    },\n    {\n      name: "日期",\n      code: "date",\n      width: 180,\n    },\n    {\n      name: "日期类型",\n      code: "dateType",\n      width: 150,\n      render: (value: string) => {\n        if (value === "workingDay") {\n          return "工作日";\n        } else if (value === "naturalDay") {\n          return "自然日";\n        }\n        return "";\n      },\n    },\n    {\n      name: "数值",\n      code: "number",\n      width: 180,\n      align: "right",\n    },\n    {\n      name: "备注",\n      code: "remark",\n      width: 300,\n      ellipsis: true,\n    },\n    {\n      name: "字段1",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段2",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段3",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段4",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段5",\n      code: "email",\n      width: 150,\n    },\n    {\n      name: "字段6",\n      code: "email",\n      width: 150,\n    },\n  ];\n\n  useEffect(() => {\n    getTableData();\n  }, []);\n\n  return (\n    <>\n      <div className={styles.itemTitleRow}>\n        <Button type=\'primary\' ghost onClick={onEditClick}>\n          编辑\n        </Button>\n      </div>\n      <div className={styles.content}>\n        <AliMainTable\n          rowKey=\'id\'\n          isLoading={loading}\n          columns={columns}\n          dataSource={tableData}\n          getDataSource={getTableData}\n          selectedRows={selectedRows}\n          setSelectedRows={setSelectedRows}\n          pagination={pagination}\n          setPagination={setPagination}\n          footerDataSource={footerDataSource}\n          isStickyFooter\n        />\n      </div>\n    </>\n  );\n};\n\nexport default Content;'}],de=()=>(0,g.jsx)(i.A,{className:te,title:"添加底部汇总行的表格",codeParams:ce,children:(0,g.jsx)(le,{})}),me="AliTableSection_container__G23wj",ue="AliTableSection_sample__9pHtT",ge=[(0,g.jsx)(R,{}),(0,g.jsx)(z,{}),(0,g.jsx)(q,{}),(0,g.jsx)(ne,{}),(0,g.jsx)(de,{})],pe=()=>(0,g.jsx)("div",{className:me,children:ge.map(((e,n)=>(0,g.jsx)("div",{className:ue,children:e},n)))})}}]);