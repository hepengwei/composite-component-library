"use strict";(self.webpackChunkcomposite_component_library=self.webpackChunkcomposite_component_library||[]).push([[826],{13939:(e,n,t)=>{t.d(n,{Ay:()=>i,lS:()=>l});t(96540);var o=t(84769),r=t(74848);const l=(e,n)=>{const{pageNum:t,pageSize:o,total:r,pageSizeOptions:l=["10","20","50","100"]}=e;return{current:Number(t),hideOnSinglePage:!1,pageSize:Number(o),showQuickJumper:!0,total:Number(r),size:"small",pageSizeOptions:l,showTotal:e=>`共${e}条数据`,onChange:async(e,t)=>{n?.({pageNum:e,pageSize:t})}}},i=e=>{const n=(e=>{const{pageNum:n,pageSize:t,total:o,showTotal:r,...l}=e;return{showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:e=>`共${e}条数据`,current:Number(n)||1,pageSize:Number(t)||10,total:Number(o)||0,...l}})(e);return(0,r.jsx)(o.A,{...n})}},14384:(e,n,t)=>{t.d(n,{JV:()=>l,WU:()=>o,Yr:()=>i,Zv:()=>r});const o='import React, { useMemo, useRef, useEffect } from "react";\nimport { PaginationProps } from "antd/lib/pagination";\nimport type { ArtColumn } from "ali-react-table";\nimport AliTable from "./index";\nimport type { ArtColumn2, AliTableProps } from "./index";\nimport { createPagination } from "./TablePagination";\nimport { getRandomId } from "utils/util";\n\ninterface AliMainTableProps extends Omit<AliTableProps, "rowKey" | "columns"> {\n  rowKey?: string;\n  columns: ArtColumn2[] | ArtColumn[];\n  dataSource: Record<string, any>[];\n  getDataSource: (pagin?: Record<string, any>) => void;\n  selectedRows: Record<string, any>[];\n  setSelectedRows: (selectedRows: Record<string, any>[]) => void;\n  pagination?: PaginationProps;\n  setPagination?: (pagination: Record<string, any>) => void;\n}\n\nconst AliMainTable = (props: AliMainTableProps) => {\n  const {\n    rowKey = "randomId",\n    columns,\n    dataSource,\n    getDataSource,\n    isLoading,\n    selectedRows,\n    setSelectedRows,\n    pagination,\n    setPagination,\n    multiSelect,\n    multiSelectOptions,\n    singleSelect,\n    singleSelectOptions,\n    ...restProps\n  } = props;\n  const multiSelectOptionsRef = useRef<any>(null);\n  const singleSelectOptionsRef = useRef<any>(null);\n\n  const paginationWitchMemo = useMemo(() => {\n    if (pagination && setPagination) {\n      return createPagination(\n        pagination,\n        async ({ pageNum, pageSize }: any) => {\n          await setPagination?.({ pageNum, pageSize });\n          getDataSource({ pageNum, pageSize });\n        }\n      );\n    }\n    return undefined;\n  }, [pagination, setPagination]);\n\n  const proMultiSelectOptions = useMemo(() => {\n    if (multiSelect) {\n      return {\n        value: selectedRows?.map((item: Record<string, any>) => item[rowKey]),\n        onChange: (selectedRowKeys: string) => {\n          const newSelectedRows = dataSource.filter(\n            (item: Record<string, any>) =>\n              selectedRowKeys.includes(item[rowKey])\n          );\n          setSelectedRows(newSelectedRows);\n        },\n        sotpClickEventPropagation: true,\n        ref: multiSelectOptionsRef,\n        ...(multiSelectOptions || {}),\n      };\n    }\n    return {};\n  }, [multiSelect, selectedRows, multiSelectOptions, dataSource]);\n\n  const proSingleSelectOptions = useMemo(() => {\n    if (singleSelect) {\n      return {\n        value: selectedRows?.[0]?.[rowKey] || "",\n        onChange: (selectedRowKey: string) => {\n          const newSelectedRows = dataSource.filter(\n            (item: Record<string, any>) => item[rowKey] === selectedRowKey\n          );\n          setSelectedRows(newSelectedRows);\n        },\n        ref: singleSelectOptionsRef,\n        ...(singleSelectOptions || {}),\n      };\n    }\n    return {};\n  }, [singleSelect, selectedRows, singleSelectOptions, dataSource]);\n\n  useEffect(() => {\n    if (isLoading) {\n      multiSelectOptionsRef?.current?.clear();\n      singleSelectOptionsRef?.current?.clear();\n    }\n  }, [isLoading]);\n\n  const onRowClick = (record: Record<string, any>) => {\n    const clickRowKey = record[rowKey];\n    const isSelected = selectedRows?.find(\n      (item) => item[rowKey] === clickRowKey\n    );\n    if (singleSelect) {\n      // 当前行已被选中则不进行任何操作\n      if (selectedRows && selectedRows[0]?.[rowKey] === clickRowKey) return;\n      singleSelectOptionsRef.current?.setSelectedRow(record);\n    } else {\n      // 当前行已被选中且只选中了这一条，则取消选中\n      if (isSelected && selectedRows?.length === 1) {\n        setSelectedRows?.([]);\n        multiSelectOptionsRef?.current?.clear();\n        return;\n      }\n      multiSelectOptionsRef?.current?.setSelectedRows([record]);\n    }\n    setSelectedRows?.([record]);\n  };\n\n  const selectedRowKeys = useMemo(() => {\n    return selectedRows?.map((item) => item[rowKey]) || [];\n  }, [selectedRows]);\n\n  const proDataSoure = useMemo(() => {\n    if (rowKey === "randomId" && dataSource?.length > 0) {\n      return dataSource.map((item: Record<string, any>) => ({\n        ...item,\n        randomId: getRandomId(12),\n      }));\n    }\n    return dataSource;\n  }, [dataSource]);\n\n  return (\n    <AliTable\n      rowKey={rowKey}\n      resize\n      autoHeight\n      recalculateHeight\n      isLoading={isLoading}\n      columns={columns as ArtColumn[]}\n      dataSource={proDataSoure}\n      pagination={paginationWitchMemo}\n      selectedRowKeys={selectedRowKeys}\n      onRowClick={onRowClick}\n      multiSelect={multiSelect}\n      multiSelectOptions={proMultiSelectOptions}\n      singleSelect={singleSelect}\n      singleSelectOptions={proSingleSelectOptions}\n      {...restProps}\n    />\n  );\n};\n\nexport default AliMainTable;',r='/**\n * 基于ali-react-table封装的表格组件\n * 功能用法请查询：https://ali-react-table.js.org/\n */\nimport React, { useMemo, Ref, ReactNode, ReactElement } from "react";\nimport {\n  useTablePipeline,\n  features,\n  BaseTableProps,\n  TablePipeline,\n} from "ali-react-table";\nimport type { ArtColumn } from "ali-react-table";\nimport { Checkbox, Radio } from "antd";\nimport { PaginationProps } from "antd/lib/pagination";\nimport AliBaseTable from "./AliBaseTable";\nimport supportEllipsis from "./supportEllipsis";\nimport tableFilter from "./tableFilter";\nimport FunctionPanel from "./FunctionPanel";\nimport TablePagination from "./TablePagination";\nimport useTableHeight from "./useTableHeight";\nimport useMultiSelect from "./useMultiSelect";\nimport useSingleSelect from "./useSingleSelect";\nimport styles from "./index.module.scss";\n\nexport interface ArtColumn2 extends Omit<ArtColumn, "lock"> {\n  ellipsis?: boolean;\n  lock?: boolean | "left" | "right";\n}\n\nexport type MultiSelectOptions = features.MultiSelectFeatureOptions & {\n  Checkbox?: ReactElement;\n  ref?: Ref<any>;\n};\n\nexport type SingleSelectOptions = features.SingleSelectFeatureOptions & {\n  Radio?: ReactElement;\n  ref?: Ref<any>;\n};\n\nexport interface AliTableProps extends BaseTableProps {\n  rowKey: string;\n  // 是否支持排序\n  sort?: boolean;\n  sortOptions?: features.SortFeatureOptions;\n  // 是否支持拖拉调整列宽度\n  resize?: boolean;\n  resizeOptions?: features.ColumnResizeFeatureOptions;\n  // 是否支持多选\n  multiSelect?: boolean;\n  multiSelectOptions?: MultiSelectOptions;\n  // 是否显示单选框\n  singleSelect?: boolean;\n  singleSelectOptions?: SingleSelectOptions;\n  // 分页\n  pagination?: PaginationProps;\n  // 操作区按钮\n  buttonGroup?: ReactNode;\n  // 表格高度\n  height?: number;\n  // 空数据时显示手动查询\n  showQuery?: boolean;\n  // 是否有边框\n  bordered?: boolean;\n  // 自动计算高度，和recalculateHeight配合\n  autoHeight?: boolean;\n  // 激活表格重新计算高度，和autoHeight配合\n  recalculateHeight?: boolean | boolean[];\n  // 是否显示底部功能区\n  showFunctionPanel?: boolean;\n  // 菜单id + tableKey 会组成唯一标识，若一个菜单下有多个表格，又需要开启持久化功能情况下，务必要设置tableKey，确保表格有唯一id\n  tableKey?: string;\n  selectedRowKeys?: string[];\n  // 点击行的回调\n  onRowClick?: (record: Record<string, any>) => void;\n}\n\n// 表格常用功能整合\nconst useProTablePipeline = (\n  props: AliTableProps & { filter?: boolean }\n): TablePipeline => {\n  const {\n    dataSource,\n    columns,\n    rowKey,\n    sort = false,\n    sortOptions,\n    resize = false,\n    resizeOptions,\n    multiSelect = false,\n    multiSelectOptions,\n    singleSelect = false,\n    singleSelectOptions,\n    getRowProps,\n  } = props;\n  let pipeline = useTablePipeline({\n    components: {\n      Checkbox: multiSelectOptions?.Checkbox ?? Checkbox,\n      Radio: singleSelectOptions?.Radio ?? Radio,\n    },\n  })\n    .input({ dataSource, columns })\n    .primaryKey(rowKey);\n\n  pipeline = pipeline.use(supportEllipsis);\n  pipeline = pipeline.use(tableFilter);\n\n  if (multiSelect) {\n    pipeline = pipeline.use(\n      features.multiSelect({\n        highlightRowWhenSelected: true,\n        clickArea: "cell",\n        checkboxColumn: { lock: true },\n        stopClickEventPropagation: true,\n        ...multiSelectOptions,\n      })\n    );\n  }\n\n  if (singleSelect) {\n    pipeline = pipeline.use(\n      features.singleSelect({\n        highlightRowWhenSelected: true,\n        clickArea: "cell",\n        radioColumn: { lock: true },\n        stopClickEventPropagation: true,\n        ...singleSelectOptions,\n      })\n    );\n  }\n\n  if (sort) {\n    pipeline = pipeline.use(\n      features.sort({\n        mode: "single",\n        keepDataSource: true,\n        ...sortOptions,\n      })\n    );\n  }\n\n  if (resize) {\n    pipeline = pipeline.use(\n      features.columnResize({\n        handleHoverBackground: "var(--g-primary-color) !important",\n        handleActiveBackground: "var(--g-primary-color)",\n        ...resizeOptions,\n      })\n    );\n  }\n\n  if (getRowProps) {\n    pipeline.appendRowPropsGetter(getRowProps);\n  }\n\n  return pipeline;\n};\n\nconst AliTable = (props: AliTableProps) => {\n  const {\n    dataSource,\n    columns,\n    rowKey,\n    sort,\n    sortOptions,\n    resize,\n    resizeOptions = {},\n    multiSelect,\n    multiSelectOptions = {},\n    singleSelect,\n    singleSelectOptions = {},\n    pagination,\n    buttonGroup,\n    height,\n    autoHeight,\n    recalculateHeight,\n    showFunctionPanel = true,\n    tableKey = "aliTable",\n    useVirtual,\n    selectedRowKeys = [],\n    onRowClick,\n    getRowProps,\n    style,\n    ...restProps\n  } = props;\n\n  const { tableContainerRef, tableStyle, emptyCellHeight } = useTableHeight({\n    height,\n    autoHeight,\n    recalculateHeight,\n    pagination,\n    style,\n  });\n\n  const {\n    selectValue,\n    selectAll,\n    selectRows,\n    clearSelect,\n    clearCurrentSelect,\n    proMutiSelectOptions,\n    indeterminate,\n    checked,\n  } = useMultiSelect({\n    rowKey,\n    multiSelectOptions,\n    dataSource,\n  });\n\n  const { proSingleSelectOptions } = useSingleSelect({\n    rowKey,\n    singleSelectOptions,\n  });\n\n  const pipeline = useProTablePipeline({\n    dataSource,\n    columns,\n    rowKey,\n    sort,\n    sortOptions,\n    resize,\n    resizeOptions,\n    multiSelect,\n    multiSelectOptions: proMutiSelectOptions,\n    singleSelect,\n    singleSelectOptions: proSingleSelectOptions,\n    getRowProps,\n  });\n\n  const activeVirtual = useMemo(() => {\n    if (useVirtual) return useVirtual;\n    if (!dataSource) return false;\n    return { vertical: false };\n  }, [dataSource, useVirtual]);\n\n  const functionPanelProps = {\n    selectAll,\n    clearSelect,\n    clearCurrentSelect,\n    indeterminate,\n    checked,\n    selectValue,\n    selectRows,\n    buttonGroup,\n  };\n\n  return (\n    <div className={styles.tableContainer} ref={tableContainerRef}>\n      <AliBaseTable\n        style={tableStyle}\n        emptyCellHeight={emptyCellHeight}\n        useVirtual={activeVirtual}\n        useOuterBorder\n        autoHeight\n        {...restProps}\n        {...pipeline.getProps()}\n        getRowProps={(record) => {\n          const selected = selectedRowKeys?.includes(record[rowKey]);\n\n          return {\n            style: selected\n              ? {\n                  "--hover-bgcolor": "#1677FF80",\n                  "--bgcolor": "#1677FF80",\n                  "--odd-bgcolor": "#1677FF80",\n                  "--color": "#FFFFFF",\n                }\n              : {},\n            className: selected ? "selected" : "",\n            onClick() {\n              onRowClick?.(record);\n            },\n          };\n        }}\n      />\n      {showFunctionPanel && (\n        <div className={styles.functionPanel}>\n          {multiSelect && <FunctionPanel {...functionPanelProps} />}\n          {pagination && <TablePagination {...pagination} />}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AliTable;',l=".selected {\n  font-size: var(--g-base-size);\n  color: var(--g-text-color);\n  margin-right: 12px;\n  cursor: pointer;\n\n  em {\n    color: var(--g-primary-color);\n    font-style: normal;\n    padding: 0 4px;\n  }\n}\n\n.tableContainer {\n  $tableRowHeight: 26px;\n  $fontSize: 12px;\n\n  position: relative;\n  height: 100%;\n  :global {\n    .art-table-wrapper {\n      --row-height: 26px;\n\n      .art-loading-wrapper {\n        height: 100%;\n        .art-loading-content-wrapper {\n          height: 100%;\n          .art-table {\n            height: 100%;\n            .art-table-header {\n              border-right: 7px solid #e9edf2;\n              .art-table-header-row {\n                .art-table-header-cell {\n                  height: $tableRowHeight !important;\n                  padding: 3px 9px !important;\n                  font-weight: 600 !important;\n                  --header-color: #333333 !important;\n                }\n              }\n            }\n\n            .art-table-body {\n              height: calc(100% - $tableRowHeight);\n              overflow-y: scroll;\n              table {\n                .art-table-row {\n                  color: var(--color);\n\n                  td.art-table-cell {\n                    box-sizing: border-box;\n                    height: $tableRowHeight !important;\n                    max-height: $tableRowHeight !important;\n                    min-height: $fontSize !important;\n                    line-height: 16px !important;\n                    padding: 3px 9px !important;\n                    vertical-align: middle !important;\n                  }\n                  &:hover {\n                    --hover-bgcolor: #b4d5ff;\n                  }\n                }\n                .odd {\n                  color: var(--color);\n                  --odd-bgcolor: #edf2fc;\n                  td.art-table-cell {\n                    background: var(--odd-bgcolor);\n                  }\n                  &:hover {\n                    --odd-bgcolor: #b4d5ff;\n                  }\n                }\n                .selected {\n                  .art-table-cell {\n                    span {\n                      --color: #ffffff !important;\n                    }\n                    button {\n                      --color: #ffffff !important;\n                      color: #ffffff !important;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    .use-outer-border:not(.has-footer) tbody tr.last td {\n      border-bottom: var(--cell-border-horizontal) !important;\n    }\n\n    .use-outer-border:not(.has-footer)\n      tbody\n      tr.last.first.no-hover\n      td.first.last {\n      border-bottom: none !important;\n    }\n  }\n\n  .functionPanel {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 4px;\n    :global {\n      .ant-pagination-total-text,\n      .ant-pagination-prev,\n      .ant-pagination-next,\n      .ant-pagination-item {\n        height: $tableRowHeight !important;\n        line-height: $tableRowHeight !important;\n        font-size: 12px !important;\n      }\n      .ant-select {\n        height: $tableRowHeight !important;\n        font-size: 12px !important;\n        .ant-select-selector {\n          font-size: 12px !important;\n        }\n      }\n      .ant-checkbox-wrapper {\n        font-size: 12px !important;\n      }\n      span {\n        font-size: 12px !important;\n      }\n    }\n  }\n}\n\n.ellipsisText {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}",i='import React, { forwardRef } from "react";\nimport { Empty } from "antd";\nimport { BaseTable, BaseTableProps } from "ali-react-table";\nimport classnames from "classnames";\nimport styled from "styled-components";\n\nconst BasicTable = styled(BaseTable)`\n  &.dark {\n    --bgcolor: #132331;\n    --header-bgcolor: #182735;\n    --hover-bgcolor: #182735;\n    --header-hover-bgcolor: #182735;\n    --highlight-bgcolor: #191a1b;\n    --header-highlight-bgcolor: #191a1b;\n    --color: rgba(255, 255, 255, 0.88);\n    --header-color: rgba(255, 255, 255, 0.88);\n    --lock-shadow: rgb(37 37 37 / 0.5) 0 0 6px 2px;\n    --border-color: #0a131b;\n  }\n  td {\n    word-wrap: break-word;\n  }\n  th {\n    font-weight: 600;\n    padding-top: 0;\n    padding-bottom: 0;\n    border-bottom-width: 2px;\n\n    .ant-checkbox-wrapper {\n      display: none;\n    }\n    &:hover {\n      background: #e2e7ee;\n      .resize-handle {\n        background: #d7dbe1;\n      }\n    }\n  }\n  &,\n  .art-horizontal-scroll-container {\n    ::-webkit-scrollbar {\n      width: 7px;\n      height: 7px;\n    }\n\n    ::-webkit-scrollbar-thumb {\n      background: #ababab;\n      border-radius: 4px;\n\n      &:hover {\n        background: #6e6e6e;\n      }\n    }\n  }\n  ${(props: any) =>\n    props.bordered\n      ? ""\n      : `& {\n      --cell-border-vertical: none;\n      --header-cell-border-vertical: none;\n      thead > tr.first th {\n        border-top: none;\n      }\n      td.first.last {\n        border-bottom: none;\n      }\n    }`}\n`;\n\nexport const AliBaseTable = forwardRef<\n  BaseTable,\n  BaseTableProps & { skinColor?: "light" | "dark" }\n>(({ skinColor, ...restProps }, ref) => {\n  return (\n    <BasicTable\n      ref={ref}\n      stickyScrollHeight={7}\n      className={classnames(\n        { dark: skinColor === "dark" },\n        restProps.className\n      )}\n      components={{\n        EmptyContent: () => <Empty />,\n      }}\n      estimatedRowHeight={26}\n      {...restProps}\n    />\n  );\n});\n\nexport default AliBaseTable;'},68826:(e,n,t)=>{t.d(n,{A:()=>j,w:()=>B});var o=t(96540),r=t(1341),l=t(2049),i=t(91196),a=t(50770),s=t(17308),c=t(46942),p=t.n(c),u=t(21250),d=t(74848);const g=(0,u.Ay)(r.B)`
  &.dark {
    --bgcolor: #132331;
    --header-bgcolor: #182735;
    --hover-bgcolor: #182735;
    --header-hover-bgcolor: #182735;
    --highlight-bgcolor: #191a1b;
    --header-highlight-bgcolor: #191a1b;
    --color: rgba(255, 255, 255, 0.88);
    --header-color: rgba(255, 255, 255, 0.88);
    --lock-shadow: rgb(37 37 37 / 0.5) 0 0 6px 2px;
    --border-color: #0a131b;
  }
  td {
    word-wrap: break-word;
  }
  th {
    font-weight: 600;
    padding-top: 0;
    padding-bottom: 0;
    border-bottom-width: 2px;

    .ant-checkbox-wrapper {
      display: none;
    }
    &:hover {
      background: #e2e7ee;
      .resize-handle {
        background: #d7dbe1;
      }
    }
  }
  &,
  .art-horizontal-scroll-container {
    ::-webkit-scrollbar {
      width: 7px;
      height: 7px;
    }

    ::-webkit-scrollbar-thumb {
      background: #ababab;
      border-radius: 4px;

      &:hover {
        background: #6e6e6e;
      }
    }
  }
  ${e=>e.bordered?"":"& {\n      --cell-border-vertical: none;\n      --header-cell-border-vertical: none;\n      thead > tr.first th {\n        border-top: none;\n      }\n      td.first.last {\n        border-bottom: none;\n      }\n    }"}
`,m=(0,o.forwardRef)(((e,n)=>{let{skinColor:t,...o}=e;return(0,d.jsx)(g,{ref:n,stickyScrollHeight:7,className:p()({dark:"dark"===t},o.className),components:{EmptyContent:()=>(0,d.jsx)(s.A,{})},estimatedRowHeight:26,...o})}));var h=t(27444),b=t(61878);const S="AliTable_tableContainer__E+Uj9",f="AliTable_functionPanel__QUNgZ",w="AliTable_tipTextArea__IWhxv",R="AliTable_ellipsisText__K+heB",{TextArea:y}=h.A,x=e=>{const n=e.getColumns().map((e=>{if(e.ellipsis&&!e.setEllipsis){const n={...e};return n.setEllipsis=!0,n._render=n.render,n.render=(n,t)=>{const o=e._render?e._render(n,t):n;return e.ellipsis2?(0,d.jsx)(b.A,{title:o?(0,d.jsx)(y,{className:w,style:{width:e.tipWidth||"auto"},value:o,disabled:!0,autoSize:!0}):void 0,children:(0,d.jsx)("div",{className:R,children:o})}):(0,d.jsx)(b.A,{title:o,children:(0,d.jsx)("div",{className:R,children:o})})},n}return e}));return e.columns(n)};var k=t(28073),O=t(33236);const v=e=>{const{_title:n,filterDropdown:t}=e;return(0,d.jsx)(k.A,{content:t,placement:"bottomLeft",trigger:"click",destroyTooltipOnHide:!0,children:(0,d.jsxs)("span",{children:[n,(0,d.jsx)(O.A,{})]})})},P=e=>{const n=e.getColumns().map((e=>{if(e.filterDropdown&&!e._title){const n={...e};return n._tittle=n.title||n.name,n.title=(0,d.jsx)(v,{...n}),n}return e}));return e.columns(n)},C=e=>{const{selectAll:n,selectRows:t,clearSelect:o,clearCurrentSelect:r,indeterminate:l,checked:a,selectValue:s,buttonGroup:c}=e;return(0,d.jsxs)("div",{children:[(0,d.jsx)(i.A,{indeterminate:l,checked:a,onChange:e=>{e.target?.checked?n():r()},children:"全选本页"}),s.length>0?(0,d.jsxs)("span",{children:["已选",(0,d.jsx)("em",{children:s.length}),"项"]}):null,c?(0,d.jsx)(c,{selectRows:t,clearSelect:o}):null]})};var A=t(13939);const T=e=>{const{height:n,autoHeight:t,recalculateHeight:r,pagination:l,style:i={}}=e,[a,s]=(0,o.useState)(0),c=(0,o.useRef)(null),[p,u]=(0,o.useState)(document.documentElement.clientHeight);let d=n||0;t&&(d=a);const g=(0,o.useMemo)((()=>({...d&&{height:d,overflow:"auto"},...i})),[d]),m=d?l?Math.ceil(d-26-4):Math.ceil(d):void 0,h=Array.isArray(r)?r:[r];return(0,o.useEffect)((()=>{const e=()=>{u(document.documentElement.clientHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,o.useLayoutEffect)((()=>{if(t&&c.current){const e=c.current.getBoundingClientRect();if(!e.width)return;const n=l?Math.ceil(e.height-26-4):Math.ceil(e.height);s(n)}}),[...h,p]),{tableStyle:g,emptyCellHeight:m,tableContainerRef:c}};var z=t(91579),K=t(5998),H=t(5158),F=t(57231);const M=e=>{const{multiSelectOptions:n,dataSource:t,rowKey:r}=e,[l,i]=(0,o.useState)(n.value||[]),a=(0,o.useRef)([]),s=(0,o.useMemo)((()=>{let e=t;return n.isDisabled&&(e=e.filter(((e,t)=>!n.isDisabled?.(e,t)))),e.map((e=>e[r]))}),[t]),c=()=>{a.current=[],i([])};(0,o.useMemo)((()=>{const e=[...a.current,...t],n=(0,H.A)(e,(e=>e[r]));a.current=l.map((e=>n[e]))}),[l,t]);const p={...n,value:l,onChange:e=>{i(e)}},{indeterminate:u,checked:d}=(0,o.useMemo)((()=>{const e=(0,F.A)(s,l);return{indeterminate:e.length&&e.length!==s.length,checked:e.length&&e.length===s.length}}),[l,s,r]),g={clear:c,getSelectedRows:()=>a.current,setSelectedRows:e=>{i(e.map((e=>e[r])))},setPassDataSource:e=>{const n=(0,H.A)(e,(e=>e[r])),t=a.current.filter((e=>!n[e[r]]));i(t.map((e=>e[r])))}};return(0,o.useEffect)((()=>{n.ref&&(n.ref.current=g)}),[n.ref]),(0,o.useEffect)((()=>{n.onChange?.(l,a.current)}),[l]),{selectValue:l,selectRows:a.current,selectAll:()=>{const e=(0,z.A)(l,s);i(e)},clearSelect:c,clearCurrentSelect:()=>{const e=(0,K.A)(l,s);i(e)},proMutiSelectOptions:p,indeterminate:u,checked:d}},N=e=>{const{singleSelectOptions:n,rowKey:t}=e,[r,l]=(0,o.useState)(n.value||""),i={...n,value:r,onChange:e=>{l(e)}},a={clear:()=>{l("")},setSelectedRow:e=>{l(e?e[t]:"")}};return(0,o.useEffect)((()=>{n.ref&&(n.ref.current=a)}),[n.ref]),(0,o.useEffect)((()=>{n.onChange?.(r)}),[r]),{selectValue:r,proSingleSelectOptions:i}};var E=t(14384);const j=e=>{const{dataSource:n,columns:t,rowKey:s,sort:c,sortOptions:p,resize:u,resizeOptions:g={},multiSelect:h,multiSelectOptions:b={},singleSelect:w,singleSelectOptions:R={},pagination:y,buttonGroup:k,height:O,autoHeight:v,recalculateHeight:z,showFunctionPanel:K=!0,tableKey:H="aliTable",useVirtual:F,selectedRowKeys:E=[],onRowClick:j,getRowProps:B,style:_,...V}=e,{tableContainerRef:$,tableStyle:D,emptyCellHeight:L}=T({height:O,autoHeight:v,recalculateHeight:z,pagination:y,style:_}),{selectValue:W,selectAll:G,selectRows:I,clearSelect:q,clearCurrentSelect:J,proMutiSelectOptions:Q,indeterminate:U,checked:Z}=M({rowKey:s,multiSelectOptions:b,dataSource:n}),{proSingleSelectOptions:Y}=N({rowKey:s,singleSelectOptions:R}),X=(e=>{const{dataSource:n,columns:t,rowKey:o,sort:s=!1,sortOptions:c,resize:p=!1,resizeOptions:u,multiSelect:d=!1,multiSelectOptions:g,singleSelect:m=!1,singleSelectOptions:h,getRowProps:b}=e;let S=(0,r.u)({components:{Checkbox:g?.Checkbox??i.A,Radio:h?.Radio??a.Ay}}).input({dataSource:n,columns:t}).primaryKey(o).use(x).use(P);return d&&(S=S.use(l.qT.multiSelect({highlightRowWhenSelected:!0,clickArea:"cell",checkboxColumn:{lock:!0},stopClickEventPropagation:!0,...g}))),m&&(S=S.use(l.qT.singleSelect({highlightRowWhenSelected:!0,clickArea:"cell",radioColumn:{lock:!0},stopClickEventPropagation:!0,...h}))),s&&(S=S.use(l.qT.sort({mode:"single",keepDataSource:!0,...c}))),p&&(S=S.use(l.qT.columnResize({handleHoverBackground:"var(--g-primary-color) !important",handleActiveBackground:"var(--g-primary-color)",...u}))),b&&S.appendRowPropsGetter(b),S})({dataSource:n,columns:t,rowKey:s,sort:c,sortOptions:p,resize:u,resizeOptions:g,multiSelect:h,multiSelectOptions:Q,singleSelect:w,singleSelectOptions:Y,getRowProps:B}),ee=(0,o.useMemo)((()=>F||!!n&&{vertical:!1}),[n,F]),ne={selectAll:G,clearSelect:q,clearCurrentSelect:J,indeterminate:U,checked:Z,selectValue:W,selectRows:I,buttonGroup:k};return(0,d.jsxs)("div",{className:S,ref:$,children:[(0,d.jsx)(m,{style:D,emptyCellHeight:L,useVirtual:ee,useOuterBorder:!0,autoHeight:!0,...V,...X.getProps(),getRowProps:e=>{const n=E?.includes(e[s]);return{style:n?{"--hover-bgcolor":"#1677FF80","--bgcolor":"#1677FF80","--odd-bgcolor":"#1677FF80","--color":"#FFFFFF"}:{},className:n?"selected":"",onClick(){"footer"!==e[s]&&j?.(e)}}}}),K&&(0,d.jsxs)("div",{className:f,children:[h&&(0,d.jsx)(C,{...ne}),y&&(0,d.jsx)(A.Ay,{...y})]})]})},B=[{fileName:"AliTable.tsx",code:E.Zv},{fileName:"AliTable.module.scss",code:E.JV},{fileName:"AliBaseTable.tsx",code:E.Yr}]}}]);