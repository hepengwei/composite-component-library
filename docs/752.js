"use strict";(self.webpackChunkcomposite_component_library=self.webpackChunkcomposite_component_library||[]).push([[752],{13939:(e,n,t)=>{t.d(n,{Ay:()=>u,lS:()=>p});var o=t(64467),r=t(80045),l=(t(96540),t(44485)),i=t(74848);const a=["pageNum","pageSize","total","showTotal"];function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,o.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const p=(e,n)=>{const{pageNum:t,pageSize:o,total:r,pageSizeOptions:l=["10","20","50","100"]}=e;return{current:Number(t),hideOnSinglePage:!1,pageSize:Number(o),showQuickJumper:!0,total:Number(r),size:"small",pageSizeOptions:l,showTotal:e=>"共".concat(e,"条数据"),onChange:async(e,t)=>{null==n||n({pageNum:e,pageSize:t})}}},u=e=>{const n=(e=>{const{pageNum:n,pageSize:t,total:o,showTotal:l}=e,i=(0,r.A)(e,a);return c({showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],showTotal:e=>"共".concat(e,"条数据"),current:Number(n)||1,pageSize:Number(t)||10,total:Number(o)||0},i)})(e);return(0,i.jsx)(l.A,c({},n))}},14384:(e,n,t)=>{t.d(n,{JV:()=>l,WU:()=>o,Yr:()=>i,Zv:()=>r});const o='import React, { useMemo, useRef, useEffect } from "react";\nimport { PaginationProps } from "antd/lib/pagination";\nimport type { ArtColumn } from "ali-react-table";\nimport AliTable from "./index";\nimport type { ArtColumn2, AliTableProps } from "./index";\nimport { createPagination } from "./TablePagination";\nimport { getRandomId } from "utils/util";\n\ninterface AliMainTableProps extends Omit<AliTableProps, "rowKey" | "columns"> {\n  rowKey?: string;\n  columns: ArtColumn2[] | ArtColumn[];\n  dataSource: Record<string, any>[];\n  getDataSource: (pagin?: Record<string, any>) => void;\n  selectedRows: Record<string, any>[];\n  setSelectedRows: (selectedRows: Record<string, any>[]) => void;\n  pagination?: PaginationProps;\n  setPagination?: (pagination: Record<string, any>) => void;\n}\n\nconst AliMainTable = (props: AliMainTableProps) => {\n  const {\n    rowKey = "randomId",\n    columns,\n    dataSource,\n    getDataSource,\n    isLoading,\n    selectedRows,\n    setSelectedRows,\n    pagination,\n    setPagination,\n    multiSelect,\n    multiSelectOptions,\n    singleSelect,\n    singleSelectOptions,\n    ...restProps\n  } = props;\n  const multiSelectOptionsRef = useRef<any>(null);\n  const singleSelectOptionsRef = useRef<any>(null);\n\n  const paginationWitchMemo = useMemo(() => {\n    if (pagination && setPagination) {\n      return createPagination(\n        pagination,\n        async ({ pageNum, pageSize }: any) => {\n          await setPagination?.({ pageNum, pageSize });\n          getDataSource({ pageNum, pageSize });\n        }\n      );\n    }\n    return undefined;\n  }, [pagination, setPagination]);\n\n  const proMultiSelectOptions = useMemo(() => {\n    if (multiSelect) {\n      return {\n        value: selectedRows?.map((item: Record<string, any>) => item[rowKey]),\n        onChange: (selectedRowKeys: string) => {\n          const newSelectedRows = dataSource.filter(\n            (item: Record<string, any>) =>\n              selectedRowKeys.includes(item[rowKey])\n          );\n          setSelectedRows(newSelectedRows);\n        },\n        sotpClickEventPropagation: true,\n        ref: multiSelectOptionsRef,\n        ...(multiSelectOptions || {}),\n      };\n    }\n    return {};\n  }, [multiSelect, selectedRows, multiSelectOptions, dataSource]);\n\n  const proSingleSelectOptions = useMemo(() => {\n    if (singleSelect) {\n      return {\n        value: selectedRows?.[0]?.[rowKey] || "",\n        onChange: (selectedRowKey: string) => {\n          const newSelectedRows = dataSource.filter(\n            (item: Record<string, any>) => item[rowKey] === selectedRowKey\n          );\n          setSelectedRows(newSelectedRows);\n        },\n        ref: singleSelectOptionsRef,\n        ...(singleSelectOptions || {}),\n      };\n    }\n    return {};\n  }, [singleSelect, selectedRows, singleSelectOptions, dataSource]);\n\n  useEffect(() => {\n    if (isLoading) {\n      multiSelectOptionsRef?.current?.clear();\n      singleSelectOptionsRef?.current?.clear();\n    }\n  }, [isLoading]);\n\n  const onRowClick = (record: Record<string, any>) => {\n    const clickRowKey = record[rowKey];\n    const isSelected = selectedRows?.find(\n      (item) => item[rowKey] === clickRowKey\n    );\n    if (singleSelect) {\n      // 当前行已被选中则不进行任何操作\n      if (selectedRows && selectedRows[0]?.[rowKey] === clickRowKey) return;\n      singleSelectOptionsRef.current?.setSelectedRow(record);\n    } else {\n      // 当前行已被选中且只选中了这一条，则取消选中\n      if (isSelected && selectedRows?.length === 1) {\n        setSelectedRows?.([]);\n        multiSelectOptionsRef?.current?.clear();\n        return;\n      }\n      multiSelectOptionsRef?.current?.setSelectedRows([record]);\n    }\n    setSelectedRows?.([record]);\n  };\n\n  const selectedRowKeys = useMemo(() => {\n    return selectedRows?.map((item) => item[rowKey]) || [];\n  }, [selectedRows]);\n\n  const proDataSoure = useMemo(() => {\n    if (rowKey === "randomId" && dataSource?.length > 0) {\n      return dataSource.map((item: Record<string, any>) => ({\n        ...item,\n        randomId: getRandomId(12),\n      }));\n    }\n    return dataSource;\n  }, [dataSource]);\n\n  return (\n    <AliTable\n      rowKey={rowKey}\n      resize\n      autoHeight\n      recalculateHeight\n      isLoading={isLoading}\n      columns={columns as ArtColumn[]}\n      dataSource={proDataSoure}\n      pagination={paginationWitchMemo}\n      selectedRowKeys={selectedRowKeys}\n      onRowClick={onRowClick}\n      multiSelect={multiSelect}\n      multiSelectOptions={proMultiSelectOptions}\n      singleSelect={singleSelect}\n      singleSelectOptions={proSingleSelectOptions}\n      {...restProps}\n    />\n  );\n};\n\nexport default AliMainTable;',r='/**\n * 基于ali-react-table封装的表格组件\n * 功能用法请查询：https://ali-react-table.js.org/\n */\nimport React, { useMemo, Ref, ReactNode, ReactElement } from "react";\nimport {\n  useTablePipeline,\n  features,\n  BaseTableProps,\n  TablePipeline,\n} from "ali-react-table";\nimport type { ArtColumn } from "ali-react-table";\nimport { Checkbox, Radio } from "antd";\nimport { PaginationProps } from "antd/lib/pagination";\nimport AliBaseTable from "./AliBaseTable";\nimport supportEllipsis from "./supportEllipsis";\nimport tableFilter from "./tableFilter";\nimport FunctionPanel from "./FunctionPanel";\nimport TablePagination from "./TablePagination";\nimport useTableHeight from "./useTableHeight";\nimport useMultiSelect from "./useMultiSelect";\nimport useSingleSelect from "./useSingleSelect";\nimport styles from "./index.module.scss";\n\nexport interface ArtColumn2 extends Omit<ArtColumn, "lock"> {\n  ellipsis?: boolean;\n  lock?: boolean | "left" | "right";\n}\n\nexport type MultiSelectOptions = features.MultiSelectFeatureOptions & {\n  Checkbox?: ReactElement;\n  ref?: Ref<any>;\n};\n\nexport type SingleSelectOptions = features.SingleSelectFeatureOptions & {\n  Radio?: ReactElement;\n  ref?: Ref<any>;\n};\n\nexport interface AliTableProps extends BaseTableProps {\n  rowKey: string;\n  // 是否支持排序\n  sort?: boolean;\n  sortOptions?: features.SortFeatureOptions;\n  // 是否支持拖拉调整列宽度\n  resize?: boolean;\n  resizeOptions?: features.ColumnResizeFeatureOptions;\n  // 是否支持多选\n  multiSelect?: boolean;\n  multiSelectOptions?: MultiSelectOptions;\n  // 是否显示单选框\n  singleSelect?: boolean;\n  singleSelectOptions?: SingleSelectOptions;\n  // 分页\n  pagination?: PaginationProps;\n  // 操作区按钮\n  buttonGroup?: ReactNode;\n  // 表格高度\n  height?: number;\n  // 空数据时显示手动查询\n  showQuery?: boolean;\n  // 是否有边框\n  bordered?: boolean;\n  // 自动计算高度，和recalculateHeight配合\n  autoHeight?: boolean;\n  // 激活表格重新计算高度，和autoHeight配合\n  recalculateHeight?: boolean | boolean[];\n  // 是否显示底部功能区\n  showFunctionPanel?: boolean;\n  // 菜单id + tableKey 会组成唯一标识，若一个菜单下有多个表格，又需要开启持久化功能情况下，务必要设置tableKey，确保表格有唯一id\n  tableKey?: string;\n  selectedRowKeys?: string[];\n  // 点击行的回调\n  onRowClick?: (record: Record<string, any>) => void;\n}\n\n// 表格常用功能整合\nconst useProTablePipeline = (\n  props: AliTableProps & { filter?: boolean }\n): TablePipeline => {\n  const {\n    dataSource,\n    columns,\n    rowKey,\n    sort = false,\n    sortOptions,\n    resize = false,\n    resizeOptions,\n    multiSelect = false,\n    multiSelectOptions,\n    singleSelect = false,\n    singleSelectOptions,\n    getRowProps,\n  } = props;\n  let pipeline = useTablePipeline({\n    components: {\n      Checkbox: multiSelectOptions?.Checkbox ?? Checkbox,\n      Radio: singleSelectOptions?.Radio ?? Radio,\n    },\n  })\n    .input({ dataSource, columns })\n    .primaryKey(rowKey);\n\n  pipeline = pipeline.use(supportEllipsis);\n  pipeline = pipeline.use(tableFilter);\n\n  if (multiSelect) {\n    pipeline = pipeline.use(\n      features.multiSelect({\n        highlightRowWhenSelected: true,\n        clickArea: "cell",\n        checkboxColumn: { lock: true },\n        stopClickEventPropagation: true,\n        ...multiSelectOptions,\n      })\n    );\n  }\n\n  if (singleSelect) {\n    pipeline = pipeline.use(\n      features.singleSelect({\n        highlightRowWhenSelected: true,\n        clickArea: "cell",\n        radioColumn: { lock: true },\n        stopClickEventPropagation: true,\n        ...singleSelectOptions,\n      })\n    );\n  }\n\n  if (sort) {\n    pipeline = pipeline.use(\n      features.sort({\n        mode: "single",\n        keepDataSource: true,\n        ...sortOptions,\n      })\n    );\n  }\n\n  if (resize) {\n    pipeline = pipeline.use(\n      features.columnResize({\n        handleHoverBackground: "var(--g-primary-color) !important",\n        handleActiveBackground: "var(--g-primary-color)",\n        ...resizeOptions,\n      })\n    );\n  }\n\n  if (getRowProps) {\n    pipeline.appendRowPropsGetter(getRowProps);\n  }\n\n  return pipeline;\n};\n\nconst AliTable = (props: AliTableProps) => {\n  const {\n    dataSource,\n    columns,\n    rowKey,\n    sort,\n    sortOptions,\n    resize,\n    resizeOptions = {},\n    multiSelect,\n    multiSelectOptions = {},\n    singleSelect,\n    singleSelectOptions = {},\n    pagination,\n    buttonGroup,\n    height,\n    autoHeight,\n    recalculateHeight,\n    showFunctionPanel = true,\n    tableKey = "aliTable",\n    useVirtual,\n    selectedRowKeys = [],\n    onRowClick,\n    getRowProps,\n    style,\n    ...restProps\n  } = props;\n\n  const { tableContainerRef, tableStyle, emptyCellHeight } = useTableHeight({\n    height,\n    autoHeight,\n    recalculateHeight,\n    pagination,\n    style,\n  });\n\n  const {\n    selectValue,\n    selectAll,\n    selectRows,\n    clearSelect,\n    clearCurrentSelect,\n    proMutiSelectOptions,\n    indeterminate,\n    checked,\n  } = useMultiSelect({\n    rowKey,\n    multiSelectOptions,\n    dataSource,\n  });\n\n  const { proSingleSelectOptions } = useSingleSelect({\n    rowKey,\n    singleSelectOptions,\n  });\n\n  const pipeline = useProTablePipeline({\n    dataSource,\n    columns,\n    rowKey,\n    sort,\n    sortOptions,\n    resize,\n    resizeOptions,\n    multiSelect,\n    multiSelectOptions: proMutiSelectOptions,\n    singleSelect,\n    singleSelectOptions: proSingleSelectOptions,\n    getRowProps,\n  });\n\n  const activeVirtual = useMemo(() => {\n    if (useVirtual) return useVirtual;\n    if (!dataSource) return false;\n    return { vertical: false };\n  }, [dataSource, useVirtual]);\n\n  const functionPanelProps = {\n    selectAll,\n    clearSelect,\n    clearCurrentSelect,\n    indeterminate,\n    checked,\n    selectValue,\n    selectRows,\n    buttonGroup,\n  };\n\n  return (\n    <div className={styles.tableContainer} ref={tableContainerRef}>\n      <AliBaseTable\n        style={tableStyle}\n        emptyCellHeight={emptyCellHeight}\n        useVirtual={activeVirtual}\n        useOuterBorder\n        autoHeight\n        {...restProps}\n        {...pipeline.getProps()}\n        getRowProps={(record) => {\n          const selected = selectedRowKeys?.includes(record[rowKey]);\n\n          return {\n            style: selected\n              ? {\n                  "--hover-bgcolor": "#1677FF80",\n                  "--bgcolor": "#1677FF80",\n                  "--odd-bgcolor": "#1677FF80",\n                  "--color": "#FFFFFF",\n                }\n              : {},\n            className: selected ? "selected" : "",\n            onClick() {\n              onRowClick?.(record);\n            },\n          };\n        }}\n      />\n      {showFunctionPanel && (\n        <div className={styles.functionPanel}>\n          {multiSelect && <FunctionPanel {...functionPanelProps} />}\n          {pagination && <TablePagination {...pagination} />}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AliTable;',l=".selected {\n  font-size: var(--g-base-size);\n  color: var(--g-text-color);\n  margin-right: 12px;\n  cursor: pointer;\n\n  em {\n    color: var(--g-primary-color);\n    font-style: normal;\n    padding: 0 4px;\n  }\n}\n\n.tableContainer {\n  $tableRowHeight: 26px;\n  $fontSize: 12px;\n\n  position: relative;\n  height: 100%;\n  :global {\n    .art-table-wrapper {\n      --row-height: 26px;\n\n      .art-loading-wrapper {\n        height: 100%;\n        .art-loading-content-wrapper {\n          height: 100%;\n          .art-table {\n            height: 100%;\n            .art-table-header {\n              border-right: 7px solid #e9edf2;\n              .art-table-header-row {\n                .art-table-header-cell {\n                  height: $tableRowHeight !important;\n                  padding: 3px 9px !important;\n                  font-weight: 600 !important;\n                  --header-color: #333333 !important;\n                }\n              }\n            }\n\n            .art-table-body {\n              height: calc(100% - $tableRowHeight);\n              overflow-y: scroll;\n              table {\n                .art-table-row {\n                  color: var(--color);\n\n                  td.art-table-cell {\n                    box-sizing: border-box;\n                    height: $tableRowHeight !important;\n                    max-height: $tableRowHeight !important;\n                    min-height: $fontSize !important;\n                    line-height: 16px !important;\n                    padding: 3px 9px !important;\n                    vertical-align: middle !important;\n                  }\n                  &:hover {\n                    --hover-bgcolor: #b4d5ff;\n                  }\n                }\n                .odd {\n                  color: var(--color);\n                  --odd-bgcolor: #edf2fc;\n                  td.art-table-cell {\n                    background: var(--odd-bgcolor);\n                  }\n                  &:hover {\n                    --odd-bgcolor: #b4d5ff;\n                  }\n                }\n                .selected {\n                  .art-table-cell {\n                    span {\n                      --color: #ffffff !important;\n                    }\n                    button {\n                      --color: #ffffff !important;\n                      color: #ffffff !important;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    .use-outer-border:not(.has-footer) tbody tr.last td {\n      border-bottom: var(--cell-border-horizontal) !important;\n    }\n\n    .use-outer-border:not(.has-footer)\n      tbody\n      tr.last.first.no-hover\n      td.first.last {\n      border-bottom: none !important;\n    }\n  }\n\n  .functionPanel {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 4px;\n    :global {\n      .ant-pagination-total-text,\n      .ant-pagination-prev,\n      .ant-pagination-next,\n      .ant-pagination-item {\n        height: $tableRowHeight !important;\n        line-height: $tableRowHeight !important;\n        font-size: 12px !important;\n      }\n      .ant-select {\n        height: $tableRowHeight !important;\n        font-size: 12px !important;\n        .ant-select-selector {\n          font-size: 12px !important;\n        }\n      }\n      .ant-checkbox-wrapper {\n        font-size: 12px !important;\n      }\n      span {\n        font-size: 12px !important;\n      }\n    }\n  }\n}\n\n.ellipsisText {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}",i='import React, { forwardRef } from "react";\nimport { Empty } from "antd";\nimport { BaseTable, BaseTableProps } from "ali-react-table";\nimport classnames from "classnames";\nimport styled from "styled-components";\n\nconst BasicTable = styled(BaseTable)`\n  &.dark {\n    --bgcolor: #132331;\n    --header-bgcolor: #182735;\n    --hover-bgcolor: #182735;\n    --header-hover-bgcolor: #182735;\n    --highlight-bgcolor: #191a1b;\n    --header-highlight-bgcolor: #191a1b;\n    --color: rgba(255, 255, 255, 0.88);\n    --header-color: rgba(255, 255, 255, 0.88);\n    --lock-shadow: rgb(37 37 37 / 0.5) 0 0 6px 2px;\n    --border-color: #0a131b;\n  }\n  td {\n    word-wrap: break-word;\n  }\n  th {\n    font-weight: 600;\n    padding-top: 0;\n    padding-bottom: 0;\n    border-bottom-width: 2px;\n\n    .ant-checkbox-wrapper {\n      display: none;\n    }\n    &:hover {\n      background: #e2e7ee;\n      .resize-handle {\n        background: #d7dbe1;\n      }\n    }\n  }\n  &,\n  .art-horizontal-scroll-container {\n    ::-webkit-scrollbar {\n      width: 7px;\n      height: 7px;\n    }\n\n    ::-webkit-scrollbar-thumb {\n      background: #ababab;\n      border-radius: 4px;\n\n      &:hover {\n        background: #6e6e6e;\n      }\n    }\n  }\n  ${(props: any) =>\n    props.bordered\n      ? ""\n      : `& {\n      --cell-border-vertical: none;\n      --header-cell-border-vertical: none;\n      thead > tr.first th {\n        border-top: none;\n      }\n      td.first.last {\n        border-bottom: none;\n      }\n    }`}\n`;\n\nexport const AliBaseTable = forwardRef<\n  BaseTable,\n  BaseTableProps & { skinColor?: "light" | "dark" }\n>(({ skinColor, ...restProps }, ref) => {\n  return (\n    <BasicTable\n      ref={ref}\n      stickyScrollHeight={7}\n      className={classnames(\n        { dark: skinColor === "dark" },\n        restProps.className\n      )}\n      components={{\n        EmptyContent: () => <Empty />,\n      }}\n      estimatedRowHeight={26}\n      {...restProps}\n    />\n  );\n});\n\nexport default AliBaseTable;'},40752:(e,n,t)=>{t.d(n,{A:()=>oe,w:()=>re});var o=t(80045),r=t(64467),l=t(96540),i=t(1341),a=t(2049),s=t(91196),c=t(50770),p=t(57528),u=t(17308),d=t(46942),g=t.n(d),b=t(21250),m=t(74848);const f=["skinColor"];var h;function w(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}const y=(0,b.Ay)(i.B)(h||(h=(0,p.A)(["\n  &.dark {\n    --bgcolor: #132331;\n    --header-bgcolor: #182735;\n    --hover-bgcolor: #182735;\n    --header-hover-bgcolor: #182735;\n    --highlight-bgcolor: #191a1b;\n    --header-highlight-bgcolor: #191a1b;\n    --color: rgba(255, 255, 255, 0.88);\n    --header-color: rgba(255, 255, 255, 0.88);\n    --lock-shadow: rgb(37 37 37 / 0.5) 0 0 6px 2px;\n    --border-color: #0a131b;\n  }\n  td {\n    word-wrap: break-word;\n  }\n  th {\n    font-weight: 600;\n    padding-top: 0;\n    padding-bottom: 0;\n    border-bottom-width: 2px;\n\n    .ant-checkbox-wrapper {\n      display: none;\n    }\n    &:hover {\n      background: #e2e7ee;\n      .resize-handle {\n        background: #d7dbe1;\n      }\n    }\n  }\n  &,\n  .art-horizontal-scroll-container {\n    ::-webkit-scrollbar {\n      width: 7px;\n      height: 7px;\n    }\n\n    ::-webkit-scrollbar-thumb {\n      background: #ababab;\n      border-radius: 4px;\n\n      &:hover {\n        background: #6e6e6e;\n      }\n    }\n  }\n  ","\n"])),(e=>e.bordered?"":"& {\n      --cell-border-vertical: none;\n      --header-cell-border-vertical: none;\n      thead > tr.first th {\n        border-top: none;\n      }\n      td.first.last {\n        border-bottom: none;\n      }\n    }")),O=(0,l.forwardRef)(((e,n)=>{let{skinColor:t}=e,l=(0,o.A)(e,f);return(0,m.jsx)(y,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?w(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):w(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({ref:n,stickyScrollHeight:7,className:g()({dark:"dark"===t},l.className),components:{EmptyContent:()=>(0,m.jsx)(u.A,{})},estimatedRowHeight:26},l))}));var S=t(3550),P=t(40961);const R="AliTable_tableContainer__EWVEs",v="AliTable_functionPanel__eM42D",j="AliTable_tipTextArea__CIUT-",k="AliTable_ellipsisText__lzc20",x="AliTable_ellipsisTooltip__iOuMw";function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}const{TextArea:C}=S.A,T=e=>{let{title:n,text:t}=e;const o=(0,l.useRef)(null),r=(0,l.useRef)(null),[i,a]=(0,l.useState)({});return(0,m.jsxs)("div",{className:k,onMouseOver:()=>{if(r.current&&o.current){const e=r.current.getBoundingClientRect(),n=o.current.getBoundingClientRect();e.width+n.left>window.innerWidth?a({top:n.top-e.height-10,left:window.innerWidth-e.width-20,opacity:1}):a({top:n.top-e.height-10,left:n.left-(e.width-n.width)/2,opacity:1})}},onMouseLeave:()=>{r.current&&o.current&&a({top:-1999,left:-1999,opacity:0})},ref:o,children:[t,n&&(0,P.createPortal)((0,m.jsx)("div",{className:x,style:i,ref:r,children:n}),document.body)]})},z=e=>{const n=e.getColumns().map((e=>{if((e.ellipsis||e.ellipsis2)&&!e.setEllipsis){const n=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e);return n.setEllipsis=!0,n._render=n.render,n.render=(n,t)=>{const o=e._render?e._render(n,t):n;let r="";return(o||0===o)&&(r=e.ellipsis2?(0,m.jsx)(C,{className:j,style:{width:e.tipWidth||"auto"},value:o,disabled:!0,autoSize:!0}):o),(0,m.jsx)(T,{title:r,text:o})},n}return e}));return e.columns(n)};var K=t(28073),E=t(33236);function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const F=e=>{const{_title:n,filterDropdown:t}=e;return(0,m.jsx)(K.A,{content:t,placement:"bottomLeft",trigger:"click",destroyTooltipOnHide:!0,children:(0,m.jsxs)("span",{children:[n,(0,m.jsx)(E.A,{})]})})},M=e=>{const n=e.getColumns().map((e=>{if(e.filterDropdown&&!e._title){const n=D({},e);return n._tittle=n.title||n.name,n.title=(0,m.jsx)(F,D({},n)),n}return e}));return e.columns(n)},N=e=>{const{selectAll:n,selectRows:t,clearSelect:o,clearCurrentSelect:r,indeterminate:l,checked:i,selectValue:a,buttonGroup:c}=e;return(0,m.jsxs)("div",{children:[(0,m.jsx)(s.A,{indeterminate:l,checked:i,onChange:e=>{var t;null!==(t=e.target)&&void 0!==t&&t.checked?n():r()},children:"全选本页"}),a.length>0?(0,m.jsxs)("span",{children:["已选",(0,m.jsx)("em",{children:a.length}),"项"]}):null,c?(0,m.jsx)(c,{selectRows:t,clearSelect:o}):null]})};var B=t(13939);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function V(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const W=e=>{const{height:n,autoHeight:t,recalculateHeight:o,pagination:r,style:i={}}=e,[a,s]=(0,l.useState)(0),c=(0,l.useRef)(null),[p,u]=(0,l.useState)(document.documentElement.clientHeight);let d=n||0;t&&(d=a);const g=(0,l.useMemo)((()=>V(V({},d&&{height:d,overflow:"auto"}),i)),[d]),b=d?r?Math.ceil(d-26-4):Math.ceil(d):void 0,m=Array.isArray(o)?o:[o];return(0,l.useEffect)((()=>{const e=()=>{u(document.documentElement.clientHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,l.useLayoutEffect)((()=>{if(t&&c.current){const e=c.current.getBoundingClientRect();if(!e.width)return;const n=r?Math.ceil(e.height-26-4):Math.ceil(e.height);s(n)}}),[...m,p]),{tableStyle:g,emptyCellHeight:b,tableContainerRef:c}};var $=t(91579),L=t(5998),G=t(5158),I=t(57231);function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const Q=e=>{const{multiSelectOptions:n,dataSource:t,rowKey:o}=e,[r,i]=(0,l.useState)(n.value||[]),a=(0,l.useRef)([]),s=(0,l.useMemo)((()=>{let e=t;return n.isDisabled&&(e=e.filter(((e,t)=>{var o;return!(null!==(o=n.isDisabled)&&void 0!==o&&o.call(n,e,t))}))),e.map((e=>e[o]))}),[t]),c=()=>{a.current=[],i([])};(0,l.useMemo)((()=>{const e=[...a.current,...t],n=(0,G.A)(e,(e=>null==e?void 0:e[o]));a.current=r.map((e=>n[e]))}),[r,t]);const p=J(J({},n),{},{value:r,onChange:e=>{i(e)}}),{indeterminate:u,checked:d}=(0,l.useMemo)((()=>{const e=(0,I.A)(s,r);return{indeterminate:e.length&&e.length!==s.length,checked:e.length&&e.length===s.length}}),[r,s,o]),g={clear:c,getSelectedRows:()=>a.current,setSelectedRows:e=>{i(e.map((e=>e[o])))},setPassDataSource:e=>{const n=(0,G.A)(e,(e=>null==e?void 0:e[o])),t=a.current.filter((e=>!n[e[o]]));i(t.map((e=>e[o])))}};return(0,l.useEffect)((()=>{n.ref&&(n.ref.current=g)}),[n.ref]),(0,l.useEffect)((()=>{var e;null===(e=n.onChange)||void 0===e||e.call(n,r,a.current)}),[r]),{selectValue:r,selectRows:a.current,selectAll:()=>{const e=(0,$.A)(r,s);i(e)},clearSelect:c,clearCurrentSelect:()=>{const e=(0,L.A)(r,s);i(e)},proMutiSelectOptions:p,indeterminate:u,checked:d}};function U(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function Y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?U(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const Z=e=>{const{singleSelectOptions:n,rowKey:t}=e,[o,r]=(0,l.useState)(n.value||""),i=Y(Y({},n),{},{value:o,onChange:e=>{r(e)}}),a={clear:()=>{r("")},setSelectedRow:e=>{r(e?e[t]:"")}};return(0,l.useEffect)((()=>{n.ref&&(n.ref.current=a)}),[n.ref]),(0,l.useEffect)((()=>{var e;null===(e=n.onChange)||void 0===e||e.call(n,o)}),[o]),{selectValue:o,proSingleSelectOptions:i}};var X=t(14384);const ee=["dataSource","columns","rowKey","sort","sortOptions","resize","resizeOptions","multiSelect","multiSelectOptions","singleSelect","singleSelectOptions","pagination","buttonGroup","height","autoHeight","recalculateHeight","showFunctionPanel","tableKey","useVirtual","selectedRowKeys","onRowClick","getRowProps","style"];function ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}const oe=e=>{const{dataSource:n,columns:t,rowKey:r,sort:p,sortOptions:u,resize:d,resizeOptions:g={},multiSelect:b,multiSelectOptions:f={},singleSelect:h,singleSelectOptions:w={},pagination:y,buttonGroup:S,height:P,autoHeight:j,recalculateHeight:k,showFunctionPanel:x=!0,tableKey:A="aliTable",useVirtual:C,selectedRowKeys:T=[],onRowClick:K,getRowProps:E,style:H}=e,D=(0,o.A)(e,ee),{tableContainerRef:F,tableStyle:_,emptyCellHeight:V}=W({height:P,autoHeight:j,recalculateHeight:k,pagination:y,style:H}),{selectValue:$,selectAll:L,selectRows:G,clearSelect:I,clearCurrentSelect:q,proMutiSelectOptions:J,indeterminate:U,checked:Y}=Q({rowKey:r,multiSelectOptions:f,dataSource:n}),{proSingleSelectOptions:X}=Z({rowKey:r,singleSelectOptions:w}),ne=(e=>{var n,t;const{dataSource:o,columns:r,rowKey:l,sort:p=!1,sortOptions:u,resize:d=!1,resizeOptions:g,multiSelect:b=!1,multiSelectOptions:m,singleSelect:f=!1,singleSelectOptions:h,getRowProps:w}=e;let y=(0,i.u)({components:{Checkbox:null!==(n=null==m?void 0:m.Checkbox)&&void 0!==n?n:s.A,Radio:null!==(t=null==h?void 0:h.Radio)&&void 0!==t?t:c.Ay}}).input({dataSource:o,columns:r}).primaryKey(l).use(z).use(M);return b&&(y=y.use(a.qT.multiSelect(te({highlightRowWhenSelected:!0,clickArea:"cell",checkboxColumn:{lock:!0},stopClickEventPropagation:!0},m)))),f&&(y=y.use(a.qT.singleSelect(te({highlightRowWhenSelected:!0,clickArea:"cell",radioColumn:{lock:!0},stopClickEventPropagation:!0},h)))),p&&(y=y.use(a.qT.sort(te({mode:"single",keepDataSource:!0},u)))),d&&(y=y.use(a.qT.columnResize(te({handleHoverBackground:"var(--g-primary-color) !important",handleActiveBackground:"var(--g-primary-color)"},g)))),w&&y.appendRowPropsGetter(w),y})({dataSource:n,columns:t,rowKey:r,sort:p,sortOptions:u,resize:d,resizeOptions:g,multiSelect:b,multiSelectOptions:J,singleSelect:h,singleSelectOptions:X,getRowProps:E}),oe=(0,l.useMemo)((()=>C||!!n&&{vertical:!1}),[n,C]),re={selectAll:L,clearSelect:I,clearCurrentSelect:q,indeterminate:U,checked:Y,selectValue:$,selectRows:G,buttonGroup:S};return(0,m.jsxs)("div",{className:R,ref:F,children:[(0,m.jsx)(O,te(te(te({style:_,emptyCellHeight:V,useVirtual:oe,useOuterBorder:!0,autoHeight:!0},D),ne.getProps()),{},{getRowProps:e=>{const n=null==T?void 0:T.includes(e[r]);return{style:n?{"--hover-bgcolor":"#1677FF80","--bgcolor":"#1677FF80","--odd-bgcolor":"#1677FF80","--color":"#FFFFFF"}:{},className:n?"selected":"",onClick(){"footer"!==e[r]&&(null==K||K(e))}}}})),x&&(0,m.jsxs)("div",{className:v,children:[b&&(0,m.jsx)(N,te({},re)),y&&(0,m.jsx)(B.Ay,te({},y))]})]})},re=[{fileName:"AliTable.tsx",code:X.Zv},{fileName:"AliTable.module.scss",code:X.JV},{fileName:"AliBaseTable.tsx",code:X.Yr}]}}]);